# Dockerizing a express.js app

Details:
1. Create a Dockerfile and .dockerignore files, https://nodejs.org/fr/docs/guides/nodejs-docker-webapp/
2. Build image from soruce root: `docker build -t [image tag name] .`
3. start container: `docker run -[external_port:container_port] [image tag name]`
4. stop container: `docker stop [container_id]`

# Heroku cloud deployment with github CI/CD

Details:
1. Log in heroku from local computer `heroku login`
2. Create an OAUTH access token `heroku authorizations:create`
3. Create github **repo specific** secrets at `Settings|Secrets` with the oauth token
4. in github CI/CD,
    1. Build docker container, `docker build -t [image tag name] .`
    2. Log in Heroku container registry, `heroku container:login` by using the oauth token
    3. Push the image to registry, `heroku container:push [image tage name] -a [heroku app name]`
    4. Publish the container, `heroku container:release [image tage name] -a [heroku app name]`

# Site reliability

Details:
1. Log management
    1. App logs - Logging output from the application itself. This includes logs generated by your appâ€™s code and dependencies (e.g. console.log)
    2. Collect log from Heroku from Heroku CLI command line: `heroku logs -a [heroku app name] --tail`
    3. PaperTrail free tie log management add-on integration
2. Performance monitor
    1. Scout-apm free tie Hekou add-on integration